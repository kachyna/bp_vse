# Data Analysis Script for Bachelor Thesis

This Python script was used to conduct statistical analyses on survey data collected for the bachelor thesis. The goal of the script is to test research hypotheses and explore relationships between selected variables (such as motivation, barriers, financial literacy, investment activity, etc.).

## Required Libraries

- `pandas` – for working with tabular data (DataFrame)
- `numpy` – for basic numerical operations and arrays
- `scipy.stats` – for statistical tests (Chi-square, Mann-Whitney U, Spearman)
- `matplotlib.pyplot` – for basic visualizations

## Functions

The script includes the following custom functions:

- `chi_sq(name, var1, var2)`  
  Performs a Chi-square test of independence between two categorical variables.

- `mann_whitney(name, group, target)`  
  Runs the Mann-Whitney U test to compare two groups defined by a binary variable.

- `spearman(name, var1, var2)`  
  Computes the Spearman correlation between two ordinal or continuous variables.

- `spearman_invests(name, var1, var2)`  
  Variant of the Spearman correlation, limited to respondents who invest (based on a filter condition).

## Input Data

The script assumes that a DataFrame `df` is loaded into the environment, containing survey responses. All variables passed to the functions must correspond to column names in this DataFrame.

## Output

Each function prints the following to the console:

- test statistics (e.g., U or χ²)
- p-values
- group means (if applicable)
- contingency tables (for the Chi-square test)

## Notes

For detailed interpretation of the results, refer to the respective chapters of the bachelor thesis.
Both script are tailored for a questionnaire that was made for my Bachelor's Thesis. The source data and questionnaire can be obtained by contacting me at kacr03@vse.cz.

## Usage

### Install required software
1. Download python3
2. Set up venv: python -m venv /path/to/new/virtual/environment
3. Install required packages: pip install pandas numpy scipy matplotlib

### Prepare your data
Run the edit_data.py script to clean and preprocess the original CSV file exported from the survey platform.

Example usage: python edit_data.py
Insert path to your source file

This script:
- Renames columns to standardized English identifiers
- Converts ordinal and categorical answers into numeric codes
- Splits multiple-choice columns into binary columns
- Adds derived columns such as average income, consumption units, and OECD-based middle-income classification

### Run the analysis
After the data is cleaned, run the analyze_data.py script and provide the path to the newly created out.csv file.

Example usage: python statistics.py
Insert path to your source file, previously generated by edit_data.py
In case you need to plot the stats, set flag plot to true in the source code.

This script:
- Filters the dataset to include only middle-income households
- Prints summary statistics and group distributions
- Performs statistical tests:
- Mann-Whitney U test
- Spearman’s rank correlation
- Chi-square test of independence
- Generates horizontal bar charts for investment instruments, motivations, and barriers
- Exports a comparison table of investment behavior to table_output.png

### Output
- Descriptive and inferential statistics are printed to the terminal.
- Graphs are displayed using matplotlib.
- A summary table is saved as table_output.png in the working directory.